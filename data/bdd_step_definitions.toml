[[step]]
name = "create_file_with_content"
pattern = "^create file \"([^\"]+)\" with content:$"
command_template = "echo '{contents}' > {path}"
description = "Creates a file at the specified path with the provided content"
parameters = ["path", "contents"]

[[step]]
name = "ping_device"
pattern = "^ping device \"([^\"]+)\" with (\\d+) retries$"
command_template = "ping -c {retries} {ip}"
description = "Pings a device at the specified IP address with the given number of retries"
parameters = ["ip", "retries"]

[[step]]
name = "check_file_exists"
pattern = "^file \"([^\"]+)\" should exist$"
command_template = "test -f {path}"
description = "Verifies that a file exists at the specified path"
parameters = ["path"]

[[step]]
name = "create_directory"
pattern = "^create directory \"([^\"]+)\"$"
command_template = "mkdir -p {path}"
description = "Creates a directory at the specified path"
parameters = ["path"]

[[step]]
name = "remove_directory"
pattern = "^remove directory \"([^\"]+)\"$"
command_template = "rm -rf {path}"
description = "Removes a directory at the specified path"
parameters = ["path"]

[[step]]
name = "list_directory_contents"
pattern = "^list contents of directory \"([^\"]+)\"$"
command_template = "ls -la {path}"
description = "Lists all files and subdirectories in the specified directory"
parameters = ["path"]

[[step]]
name = "set_environment_variable"
pattern = "^set environment variable \"([^\"]+)\" to \"([^\"]+)\"$"
command_template = "export {name}={value}"
description = "Sets an environment variable to the specified value"
parameters = ["name", "value"]

[[step]]
name = "unset_environment_variable"
pattern = "^unset environment variable \"([^\"]+)\"$"
command_template = "unset {name}"
description = "Unsets (removes) an environment variable"
parameters = ["name"]

[[step]]
name = "check_process_running"
pattern = "^process \"([^\"]+)\" should be running$"
command_template = "pgrep -f {process_name}"
description = "Verifies that a process with the given name is running"
parameters = ["process_name"]

[[step]]
name = "kill_process"
pattern = "^kill process \"([^\"]+)\"$"
command_template = "pkill -f {process_name}"
description = "Terminates a process with the given name"
parameters = ["process_name"]

[[step]]
name = "change_file_permissions"
pattern = "^change permissions of \"([^\"]+)\" to (\\d{3,4})$"
command_template = "chmod {mode} {path}"
description = "Changes the file permissions to the specified octal mode"
parameters = ["path", "mode"]

[[step]]
name = "check_file_contains"
pattern = "^file \"([^\"]+)\" should contain \"([^\"]+)\"$"
command_template = "grep -q \"{text}\" {path}"
description = "Verifies that a file contains the specified text"
parameters = ["path", "text"]

[[step]]
name = "append_to_file"
pattern = "^append \"([^\"]+)\" to file \"([^\"]+)\"$"
command_template = "echo \"{text}\" >> {path}"
description = "Appends text to the end of a file"
parameters = ["text", "path"]

[[step]]
name = "replace_in_file"
pattern = "^replace \"([^\"]+)\" with \"([^\"]+)\" in file \"([^\"]+)\"$"
command_template = "sed -i 's/{pattern}/{replacement}/g' {path}"
description = "Replaces all occurrences of a pattern with replacement text in a file"
parameters = ["pattern", "replacement", "path"]

[[step]]
name = "wait_for_seconds"
pattern = "^wait for (\\d+) seconds?$"
command_template = "sleep {seconds}"
description = "Pauses execution for the specified number of seconds"
parameters = ["seconds"]

[[step]]
name = "wait_until_file_exists"
pattern = "^wait until file \"([^\"]+)\" exists with timeout (\\d+) seconds$"
command_template = "timeout {timeout} bash -c 'while [ ! -f {path} ]; do sleep 1; done'"
description = "Waits until a file exists or timeout is reached"
parameters = ["path", "timeout"]

[[step]]
name = "check_port_open"
pattern = "^port (\\d+) on \"([^\"]+)\" should be open$"
command_template = "nc -z {host} {port}"
description = "Verifies that a TCP port is open on the specified host"
parameters = ["port", "host"]

[[step]]
name = "http_request"
pattern = "^send (GET|POST|PUT|DELETE) request to \"([^\"]+)\"$"
command_template = "curl -X {method} {url}"
description = "Sends an HTTP request to the specified URL"
parameters = ["method", "url"]

[[step]]
name = "create_user"
pattern = "^create user \"([^\"]+)\" with uid (\\d+)$"
command_template = "useradd -u {uid} {username}"
description = "Creates a system user with the specified name and UID"
parameters = ["username", "uid"]

[[step]]
name = "delete_user"
pattern = "^delete user \"([^\"]+)\"$"
command_template = "userdel {username}"
description = "Deletes a system user"
parameters = ["username"]

[[step]]
name = "restart_service"
pattern = "^restart service \"([^\"]+)\"$"
command_template = "systemctl restart {service_name}"
description = "Restarts a system service"
parameters = ["service_name"]

[[step]]
name = "extract_archive"
pattern = "^extract archive \"([^\"]+)\" to \"([^\"]+)\"$"
command_template = "tar -xzf {archive_path} -C {destination}"
description = "Extracts an archive file to the specified destination directory"
parameters = ["archive_path", "destination"]

[[step]]
name = "create_archive"
pattern = "^create archive \"([^\"]+)\" from directory \"([^\"]+)\"$"
command_template = "tar -czf {archive_path} -C {source_directory} ."
description = "Creates an archive file from the contents of a directory"
parameters = ["archive_path", "source_directory"]
